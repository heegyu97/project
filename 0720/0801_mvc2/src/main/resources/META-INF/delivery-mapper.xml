<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="DeliveryMapper">

	<update id="delete" parameterType="kr.co.ictedu.util.dto.DeliveryDTO">
	update delivery_address
	set del_yn = 1
	where addr_no = #{addr_no}
	and mno = #{mno}
	</update>

	<insert id="insert" parameterType="kr.co.ictedu.util.dto.DeliveryDTO">
	insert into delivery_address ( addr_name, mno, recipient_name, tel, post_code, addr1, addr2, used_date )
	values ( #{addr_name}, #{mno}, #{recipient_name}, #{tel}, #{post_code}, #{addr1}, #{addr2}, now() )
	</insert>

	<select id="list"  parameterType="java.lang.String"
						resultType="kr.co.ictedu.util.dto.DeliveryDTO">
		select d.addr_no, d.addr_name, d.m_no 
			, d.recipient_name, d.tel, d.post_code, d.addr1, d.addr2, d.used_date 
		from delivery_addr d, member m  
		where d.m_no = #{m_no} 
		and del_yn = 0   
		and d.m_no = m.m_no 
		order by d.used_date desc 
	</select>

</mapper>
